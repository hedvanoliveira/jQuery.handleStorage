/* https://www.github.com/jas-/jQuery.handleStorage */
(function(a){a.fn.handleStorage=function(h){var f={appID:"jQuery.handleStorage",storage:"local",element:a(this),interval:5000,uuid:"",data:{},aes:false,callback:function(){},preCallback:function(){},errCallback:function(){}};var b=b||{init:function(k){var j=d.merge(k,f);if(!d.init(j)){return false}return true}};var d=d||{init:function(l){((l.preCallback)&&(a.isFunction(l.preCallback)))?l.preCallback(a(this)):false;l.uuid=(l.aes)?g.key(l):l.uuid;setInterval(function(){e.save(l,l.element.attr("id"),c.form(l,l.element));return true},l.interval);var j=(c.size(e.toJSON(l.data))>0)?l.data:l.element;var k=d.bind(l,j);((l.callback)&&(a.isFunction(l.callback)))?l.callback(a(this)):false;return k},merge:function(k,j){return a.extend({},j,k)},bind:function(l,k){var j=false;c.restore(l,k);switch(true){case (k).is("form"):a(k).on("submit",function(m){m.preventDefault();e.save(l,k.attr("id"),c.form(l,k))});j=true;break;case (k).is("div"):j=true;break;case (k).is("string"):j=true;break;case (k).is("object"):if(JSON.stringify(k).match(/^\{.*\}$/)){}j=true;break;default:break}return j}};var e=e||{quota:function(m,k,o){var j=/local|session/.test(k)?1024*1025*5:1024*4;var n=j-unescape(encodeURIComponent(JSON.stringify(k))).length;if(n<=0){return false}return true},save:function(p,m,l){var j=false;if(e.quota(p.appID,p.storage)){var n=e.retrieve(p,m);if(c.size(n)>0){a.extend(l,n)}l=(p.aes)?sjcl.encrypt(p.uuid,e.fromJSON(l)):e.fromJSON(l);switch(p.storage){case"cookie":this._cookie.save(p,m,l);j=true;break;case"local":this._local.save(p,m,l);j=true;break;case"session":this._session.save(p,m,l);j=true;break;default:this._local.save(p,m,l);j=true;break}}return j},retrieve:function(m,l){var j={};switch(m.storage){case"cookie":j=this._cookie.retrieve(m,l);break;case"local":j=this._local.retrieve(m,l);break;case"session":j=this._session.retrieve(m,l);break;default:j=this._local.retrieve(m,l);break}if(c.size(e.toJSON(j))>0){j=(m.aes)?sjcl.decrypt(m.uuid,j):j;return(/string/.test(typeof(j)))?e.toJSON(j):j}return false},fromJSON:function(j){return(/object/.test(typeof(j)))?JSON.stringify(j):j},toJSON:function(j){return(/string/.test(typeof(j)))?JSON.parse(j):j},_cookie:{save:function(n,l,j){var m=new Date();m.setTime(m.getTime()+(30*24*60*60*1000));document.cookie=l+"="+j+";expires="+m.toGMTString()+";path=/;domain="+this.domain();return true},retrieve:function(p,l){var m,j,q,n=document.cookie.split(";");for(m=0;m<n.length;m++){j=n[m].substr(0,n[m].indexOf("="));q=n[m].substr(n[m].indexOf("=")+1);j=j.replace(/^\s+|\s+$/g,"");if(j==l){return unescape(q)}}return false},domain:function(){return location.hostname}},_local:{save:function(m,l,j){return localStorage.setItem(l,j)},retrieve:function(m,l){var j=localStorage.getItem(l);return(j)?j:false}},_session:{save:function(m,l,j){return localStorage.setItem(l,j)},retrieve:function(m,l){var j=sessionStorage.getItem(l);return(j)?j:false}}};var g=g||{key:function(k){var j=g.uid();return sjcl.codec.hex.fromBits(sjcl.misc.pbkdf2(j,g.salt(j),1000,256))},uid:function(){var j=window.navigator.appName+window.navigator.appCodeName+window.navigator.product+window.navigator.productSub+window.navigator.appVersion+window.navigator.buildID+window.navigator.userAgent+window.navigator.language+window.navigator.platform+window.navigator.oscpu;return j.replace(/\s/,"")},salt:function(n){var k=g.iv(n);var l=[];l[0]=sjcl.hash.sha256.hash(n);var m=[];m=l[0];var j;for(i=1;i<3;i++){l[i]=sjcl.hash.sha256.hash(l[i-1].concat(k));j=m.concat(l[i])}return JSON.stringify(sjcl.codec.hex.fromBits(j))},iv:function(j){return(j)?encodeURI(j.replace(/-/gi,"").substring(16,Math.ceil(16*j.length)%j.length)):false}};var c=c||{size:function(j){var k=0;if(/object/.test(typeof(j))){a.each(j,function(m,l){if(j.hasOwnProperty(m)){k++}})}else{if(/array/.test(typeof(j))){k=j.length}}return k},form:function(l,j){var k={};if(c.size(j)>0){a.each(j,function(n,m){a.each(m,function(p,o){if((o.name)&&(o.value)){k[o.name]=(/checkbox|radio/.test(o.type))?c.selected(l,o):o.value}})})}return(/object/.test(typeof(k)))?JSON.stringify(k):k},selected:function(l,k){var j=a("#"+k.name+":checked").map(function(){return this.value}).get();return c.rdupes(j)},rdupes:function(j){var k=[];if(c.size(j)>0){a.each(j,function(m,l){if(a.inArray(l,k)===-1){k.push(l)}})}return k},restore:function(l,k){var j=e.retrieve(l,k.attr("id"));if((j)&&(c.size(j)>0)){a.each(j,function(n,m){(k.is("form"))?a("#"+k.attr("id")+" #"+n).val(m):a("#"+k.attr("id")+" #"+n).html(m)})}else{(k.is("form"))?a("#"+k.attr("id")).val(j):a("#"+k.attr("id")).html(j)}},guid:function(p){var n="0123456789abcdef".split("");var l=[],k=Math.random,m;l[8]=l[13]=l[18]=l[23]="-";l[14]="4";for(var j=0;j<36;j++){if(!l[j]){m=0|k()*16;l[j]=n[(j==19)?(m&3)|8:m&15]}}return l.join("")}};if(b[h]){return b[h].apply(this,Array.prototype.slice.call(arguments,1))}else{if((typeof h==="object")||(!h)){return b.init.apply(this,arguments)}}return true}})(jQuery);
